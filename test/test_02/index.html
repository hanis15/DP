<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>DP_v1</title>
    <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <script src="source/main.js"></script>
    <style>
        .node {
          stroke: #000;
          stroke-width: .5px;
        }

        .link {
          stroke: #9ecae1;
          stroke-width: 1.5px;
        }
    </style>
</head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
        <!-- Menu -->
        <div class="navbar-inner">
            <div class="container">
                <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="brand" href="index.html">DP v1</a>
                <div class="nav-collapse collapse">
                    <ul class="nav">
                        <li class="active"><a href="index.html">Topology map</a></li>
                        <li><a href="graph.html">Graph</a></li>
                        <li><a href="setting.html">Setting</a></li>
                        <li><a href="about.html">About</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Obsah stranky -->
        <div class="container">
            <h1>Topology map</h1>
            <p>Zde bude canvas s topologickou mapou</p>
            <div id="d3_graph" class="border-style: solid;"></div>
            <script>
                var width = 400;
                var height = 800;
                var canvas = d3.layout.force()
                    .charge(120)
                    .linkDistance(100)
                    .size([width, height]);
                
                var svg = d3.select("#d3_graph").append("svg")
                    .attr("width", width)
                    .attr("height", height);

                d3.json("draft_v1.json", function (error, data) {
                    if (error) throw error;
                    
                    canvas
                        .nodes(data.networks)
                        .links(data.routes)
                        .start();
                        
                    var node = svg.selectAll(".node")
                        .data(data.networks)
                        .enter().append("circle")
                        .attr("r", 20)
                        .attr("cx", function (d) { return Math.random() % 100; })
                        .attr("cy", function (d) { return Math.random() % 100; })
                        .call(canvas.drag);

                    node.append("title")
                        .text(function (d) { return d.name; });

                    var link = svg.selectAll(".link")
                        .data(data.routes)
                        .enter().append("line");
                    /*
                    canvas.on("tick", function () {
                        link.attr("x1", function (d) {
                            return d.source.x;
                        })
                            .attr("y1", function (d) { return d.source.y; })
                            .attr("x2", function (d) { return d.target.x; })
                            .attr("y2", function (d) { return d.target.y; });

                        node.attr("cx", function (d) { return d.x; })
                            .attr("cy", function (d) { return d.y; });
                    });
                    */
                });
            </script>
        </div>
    </div>
</body>
</html>